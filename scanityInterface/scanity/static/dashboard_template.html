{% extends 'layout/base_template.html' %}

{% block styles %}
    <title>Дэшборд</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard_styles.css') }}">
{% endblock %}

{% block content %}
    <div class="container">
        <h1 class="page-title">Загруженные снимки</h1>
        <div class="panels-grid">
            {% if scans|length > 0 %}
                {% for scan in scans %}
                    <div class="panel">
<!--                        <img src="{{ scan['scan_url'] }}" alt="Снимок КТ" class="panel-image">-->
                        <img src="data:image/png;base64,{{ scan['scan_image'] }}" alt="Снимок КТ" class="panel-image">
                        <div class="panel-content">
                            <h3 class="panel-title">{{ scan['name'] }}</h3>
                            <p class="panel-description">{{ scan['diagnosis'] }}<br>{{ scan['date'] }}</p>
                            <a href="dashboard/{{ scan['scan_id'] }}" class="panel-button">Подробнее</a>
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <div class="panel">
                    <img src="{{ url_for('static', filename='images/plus.png') }}" alt="Новый снимок" class="panel-image" style="background-color: #7B1113;">
                    <div class="panel-content">
                        <h3 class="panel-title">Нет загруженных снимков</h3>
                        <p class="panel-description">Загрузите снимок для анализа</p>
                        <a href="/upload" class="panel-button">Зарузить снимок</a>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
{% endblock %}